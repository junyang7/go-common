# _conf åŒ…è¯„ä¼°æŠ¥å‘Š

## ğŸ“‹ å½“å‰è®¾è®¡

### æ ¸å¿ƒä»£ç 
```go
type Conf interface {
    Byte(byte []byte) Conf
    Text(text string) Conf
    File(path string) Conf
    Get(path string) *_parameter.Parameter
}

func Load(conf Conf)              // åŠ è½½é…ç½®
func Get(path string) *_parameter.Parameter  // è·å–é…ç½®
```

---

## âœ… ä¼˜ç‚¹

| ä¼˜ç‚¹ | è¯´æ˜ |
|------|------|
| **æ¥å£æŠ½è±¡** | å®šä¹‰æ¸…æ™°çš„é…ç½®æ¥å£ï¼Œæ”¯æŒå¤šç§å®ç° |
| **é“¾å¼è°ƒç”¨** | `Byte/Text/File` è¿”å›è‡ªèº«ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨ |
| **æ ¼å¼æ— å…³** | ä¸šåŠ¡ä»£ç ä¸ä¾èµ–å…·ä½“é…ç½®æ ¼å¼ |
| **çº¿ç¨‹å®‰å…¨** | ä½¿ç”¨ mutex ä¿æŠ¤å…¨å±€é…ç½® |
| **ç®€æ´è®¾è®¡** | ä»£ç ä»… 31 è¡Œï¼ŒèŒè´£æ˜ç¡® |

---

## âš ï¸ é—®é¢˜

### 1. æ½œåœ¨çš„ç©ºæŒ‡é’ˆé—®é¢˜

```go
func Get(path string) *_parameter.Parameter {
    mutex.Lock()
    defer mutex.Unlock()
    return this.Get(path)  // å¦‚æœ this ä¸º nilï¼Œä¼š panic
}
```

**é—®é¢˜ï¼š** å¦‚æœå¿˜è®°è°ƒç”¨ `Load()`ï¼Œä¼šå¯¼è‡´ nil pointer panicã€‚

**å»ºè®®ï¼š** æ·»åŠ æ£€æŸ¥
```go
func Get(path string) *_parameter.Parameter {
    mutex.Lock()
    defer mutex.Unlock()
    if this == nil {
        panic("config not loaded, call _conf.Load() first")
    }
    return this.Get(path)
}
```

### 2. ç¼ºå°‘æµ‹è¯•

**å½“å‰ï¼š** æ— æµ‹è¯•æ–‡ä»¶

**å»ºè®®ï¼š** æ·»åŠ åŸºç¡€æµ‹è¯•
```go
// conf_test.go
func TestLoadAndGet(t *testing.T) {
    // æµ‹è¯•åŠ è½½å’Œè·å–
}

func TestGetBeforeLoad(t *testing.T) {
    // æµ‹è¯•æœªåŠ è½½æ—¶çš„é”™è¯¯å¤„ç†
}
```

### 3. æ— æ³•é‡ç½®é…ç½®

**é—®é¢˜ï¼š** ä¸€æ—¦ Loadï¼Œæ— æ³•æ¸…ç©ºæˆ–é‡æ–°åŠ è½½

**å»ºè®®ï¼š** æ·»åŠ  Reset æ–¹æ³•ï¼ˆå¯é€‰ï¼‰
```go
func Reset() {
    mutex.Lock()
    defer mutex.Unlock()
    this = nil
}
```

---

## ğŸ“Š è¯„åˆ†

| é¡¹ç›® | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| **æ¥å£è®¾è®¡** | â­â­â­â­â­ | æ¸…æ™°ç®€æ´ |
| **ä»£ç è´¨é‡** | â­â­â­â­ | ç®€æ´ï¼Œä½†ç¼ºå°‘é”™è¯¯å¤„ç† |
| **æ˜“ç”¨æ€§** | â­â­â­â­â­ | éå¸¸ç®€å• |
| **æµ‹è¯•è¦†ç›–** | â­ | ç¼ºå°‘æµ‹è¯• |
| **æ–‡æ¡£** | â­â­â­â­â­ | å·²è¡¥å…… README |

**æ€»è¯„ï¼šâ­â­â­â­ è‰¯å¥½**

---

## ğŸ”§ å»ºè®®æ”¹è¿›

### ä¼˜å…ˆçº§ï¼šä½ï¼ˆå¯é€‰ï¼‰

1. **æ·»åŠ  nil æ£€æŸ¥**ï¼ˆå»ºè®®ï¼‰
2. **æ·»åŠ æµ‹è¯•**ï¼ˆå»ºè®®ï¼‰
3. **æ·»åŠ  Reset æ–¹æ³•**ï¼ˆå¯é€‰ï¼‰

å½“å‰è®¾è®¡å·²ç»æ»¡è¶³åŸºæœ¬éœ€æ±‚ï¼Œæ”¹è¿›é¡¹éƒ½æ˜¯å¯é€‰çš„ã€‚

---

## ğŸ‰ æ€»ç»“

**ä¼˜åŠ¿ï¼š**
- âœ… è®¾è®¡ç®€æ´ï¼ŒèŒè´£æ˜ç¡®
- âœ… æ¥å£æŠ½è±¡å¥½ï¼Œæ‰©å±•æ€§å¼º
- âœ… æ˜“äºä½¿ç”¨

**ä¸è¶³ï¼š**
- âš ï¸ ç¼ºå°‘é”™è¯¯å¤„ç†
- âš ï¸ ç¼ºå°‘æµ‹è¯•

**æ¨èï¼š** ä¿æŒå½“å‰è®¾è®¡ï¼Œå¯é€‰æ·»åŠ  nil æ£€æŸ¥ã€‚

