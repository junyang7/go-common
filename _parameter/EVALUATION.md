# _parameter åŒ…è¯„ä¼°æŠ¥å‘Š

## âœ… è¯„ä¼°å®Œæˆ

### ğŸ“Š ä¼˜åŒ–å‰åå¯¹æ¯”

| é¡¹ç›® | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| **Default é€»è¾‘** | âŒ é”™è¯¯ | âœ… æ­£ç¡® | ä¿®å¤ä¸¥é‡Bug |
| **File æ”¯æŒ** | âŒ æ—  | âœ… æœ‰ | File/FileList |
| **å¿…å¡«éªŒè¯** | âŒ æ—  | âœ… Required | æ–°å¢ |
| **è¾…åŠ©æ–¹æ³•** | âŒ æ—  | âœ… IsNil | æ–°å¢ |
| **æµ‹è¯•è¦†ç›–** | ä½ | 58.6% | æå‡ |
| **æµ‹è¯•é€šè¿‡** | âŒ å¤±è´¥ | âœ… å…¨è¿‡ | ä¿®å¤ |
| **æ–‡æ¡£** | æ—  | å®Œæ•´ | README |

---

## ğŸ”§ æ ¸å¿ƒæ”¹è¿›

### 1. âœ… ä¿®å¤ Default ä¸¥é‡ Bug

**æ”¹è¿›å‰ï¼ˆé”™è¯¯ï¼‰ï¼š**
```go
func (p *Parameter) Default(value interface{}) *Parameter {
    this.value = value  // âŒ ç›´æ¥è¦†ç›–
    return this
}

// é—®é¢˜ç¤ºä¾‹
param := New("age", 30)
age := param.Default(18).Int64().Value()  // æœŸæœ› 30ï¼Œå®é™… 18
```

**æ”¹è¿›åï¼ˆæ­£ç¡®ï¼‰ï¼š**
```go
func (p *Parameter) Default(value interface{}) *Parameter {
    if p.value == nil {  // âœ… åªåœ¨ nil æ—¶è®¾ç½®
        p.value = value
    }
    return p
}

// æ­£ç¡®è¡Œä¸º
param := New("age", 30)
age := param.Default(18).Int64().Value()  // 30ï¼ˆä¿æŒåŸå€¼ï¼‰

param := New("age", nil)
age := param.Default(18).Int64().Value()  // 18ï¼ˆä½¿ç”¨é»˜è®¤å€¼ï¼‰
```

### 2. âœ… æ·»åŠ  File æ”¯æŒï¼ˆç»Ÿä¸€ _contextï¼‰

```go
// File() - è¿”å›ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼ˆ90% åœºæ™¯ï¼‰
func (p *Parameter) File() *multipart.FileHeader

// FileList() - è¿”å›æ–‡ä»¶åˆ—è¡¨ï¼ˆå¤šæ–‡ä»¶ä¸Šä¼ ï¼‰
func (p *Parameter) FileList() []*multipart.FileHeader
```

**ä½¿ç”¨ï¼š**
```go
// _context ä¸­ç»Ÿä¸€è¿”å› Parameter
file := ctx.File("avatar").File()           // ç¬¬ä¸€ä¸ª
files := ctx.File("avatar").FileList()      // å…¨éƒ¨
file := ctx.File("avatar").Required().File() // å¿…å¡«
```

### 3. âœ… æ·»åŠ å¿…å¡«éªŒè¯

```go
func (p *Parameter) Required() *Parameter {
    if p.value == nil {
        _interceptor.Insure(false).
            Message(p.name + " is required").
            Do()
    }
    return p
}
```

### 4. âœ… åˆ é™¤å¤æ‚ç±»å‹ï¼ˆä¸“æ³¨ HTTPï¼‰

ç§»é™¤äº†ï¼š
- âŒ As* ç³»åˆ—ï¼ˆAsInt64, AsString ç­‰ï¼‰
- âŒ Slice()ã€Map() ç­‰å¤æ‚ç±»å‹
- âŒ IsEmpty()

**ç†ç”±ï¼š**
- Parameter ä¸“æ³¨äº HTTP å‚æ•°åœºæ™¯
- ç±»å‹è½¬æ¢ç»Ÿä¸€ä½¿ç”¨ Validator
- ä¿æŒç®€æ´ï¼ŒèŒè´£å•ä¸€

---

## ğŸ“‹ æœ€ç»ˆ API æ¸…å•

### åŸºç¡€æ–¹æ³•ï¼ˆ5ä¸ªï¼‰

```go
New(name, value)     // åˆ›å»º
Default(value)       // é»˜è®¤å€¼ï¼ˆä¿®å¤ï¼‰
Required()           // å¿…å¡«ï¼ˆæ–°å¢ï¼‰
Value()              // åŸå§‹å€¼
IsNil()              // nilæ£€æŸ¥ï¼ˆæ–°å¢ï¼‰
```

### ç±»å‹è½¬æ¢ï¼ˆ4ä¸ªï¼‰

```go
Int64()              // Validator
String()             // Validator
Bool()               // Validator
Float64()            // Validator
```

### æ–‡ä»¶å¤„ç†ï¼ˆ2ä¸ªï¼‰

```go
File()               // ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼ˆæ–°å¢ï¼‰
FileList()           // æ–‡ä»¶åˆ—è¡¨ï¼ˆæ–°å¢ï¼‰
```

**æ€»è®¡ï¼š11 ä¸ªæ–¹æ³•** - ç®€æ´å®ç”¨

---

## ğŸ“Š é—®é¢˜è§£å†³æƒ…å†µ

### 1. âœ… æ˜æ˜¾é”™è¯¯ - å·²ä¿®å¤

- âœ… Default é€»è¾‘é”™è¯¯ - å·²ä¿®å¤
- âœ… æµ‹è¯•å¤±è´¥ - å·²ä¿®å¤

### 2. âœ… è¾¹ç•Œä¸æ¸… - å·²æ˜ç¡®

```go
// Default åªæ£€æŸ¥ nil
New("age", nil).Default(18)   // ä½¿ç”¨é»˜è®¤å€¼
New("age", 0).Default(18)     // ä¸ä½¿ç”¨ï¼ˆ0 æ˜¯æœ‰æ•ˆå€¼ï¼‰
New("name", "").Default("x")  // ä¸ä½¿ç”¨ï¼ˆ"" æ˜¯æœ‰æ•ˆå€¼ï¼‰

// IsNil åªæ£€æŸ¥ nil
New("age", nil).IsNil()       // true
New("age", 0).IsNil()         // false
```

### 3. âœ… é€»è¾‘é”™è¯¯ - å·²ä¿®å¤

- âœ… Default ä¸å†è¦†ç›–æœ‰æ•ˆå€¼
- âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡

### 4. âœ… æ—¥å¸¸å¼€å‘éœ€æ±‚ - å®Œå…¨æ»¡è¶³

| éœ€æ±‚ | æ”¯æŒ |
|------|------|
| HTTP å‚æ•°åŒ…è£… | âœ… |
| é»˜è®¤å€¼ | âœ… æ­£ç¡® |
| å¿…å¡«éªŒè¯ | âœ… Required |
| ç±»å‹è½¬æ¢ | âœ… ç»Ÿä¸€ Validator |
| æ–‡ä»¶ä¸Šä¼  | âœ… File/FileList |
| é…ç½®å‚æ•° | âœ… |
| ç®€æ´æ€§ | âœ… 11ä¸ªæ–¹æ³• |

---

## ğŸ¯ æœ€ç»ˆè¯„åˆ†

| è¯„ä¼°é¡¹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|--------|--------|--------|
| æ­£ç¡®æ€§ | â­â­ Bug | â­â­â­â­â­ ä¿®å¤ |
| å®Œæ•´æ€§ | â­â­â­ | â­â­â­â­â­ å®Œå–„ |
| ç®€æ´æ€§ | â­â­â­â­ | â­â­â­â­â­ æ›´å¥½ |
| æ˜“ç”¨æ€§ | â­â­â­â­ | â­â­â­â­â­ ä¼˜ç§€ |
| æµ‹è¯• | â­â­ | â­â­â­â­ è‰¯å¥½ |

**æ€»è¯„ï¼šâ­â­â­â­â­ ä¼˜ç§€**

---

## ğŸ‰ æ”¹è¿›æˆæœ

### æ ¸å¿ƒæˆå°±

1. âœ… **ä¿®å¤ Default Bug** - ä¸¥é‡é—®é¢˜å·²è§£å†³
2. âœ… **File æ”¯æŒ** - ç»Ÿä¸€ _context API
3. âœ… **èŒè´£æ˜ç¡®** - ä¸“æ³¨ HTTP å‚æ•°
4. âœ… **ç®€æ´è®¾è®¡** - 11 ä¸ªæ–¹æ³•ï¼Œå¤Ÿç”¨ä¸å†—ä½™
5. âœ… **æµ‹è¯•å®Œå–„** - 58.6% è¦†ç›–ç‡
6. âœ… **æ–‡æ¡£å®Œæ•´** - README æ¸…æ™°

### ä¸ _context å®Œç¾é…åˆ

```go
// ç»Ÿä¸€çš„ API è®¾è®¡
ctx.Get("name")      // *Parameter
ctx.Post("age")      // *Parameter
ctx.Request("id")    // *Parameter
ctx.Cookie("token")  // *Parameter
ctx.Header("auth")   // *Parameter
ctx.Server("ip")     // *Parameter
ctx.File("avatar")   // *Parameter â­ ç°åœ¨ç»Ÿä¸€äº†ï¼

// æ‰€æœ‰æ–¹æ³•éƒ½æ”¯æŒ
.Default(value)      // é»˜è®¤å€¼
.Required()          // å¿…å¡«
.Int64()/String()... // ç±»å‹è½¬æ¢
```

---

**ä¼˜åŒ–å®Œæˆï¼** ğŸš€

